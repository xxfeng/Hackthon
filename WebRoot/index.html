<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                <meta charset="utf-8">
<title>Hello, Team 4</title>
<script src="js/index.js"></script>
</head>
<!-- META DATA -->
<meta name="fragment" content="!">
<body style="" device="desktop" preview="public">
<div id="viewer_preloader">
    <p>Loading</p>
    <a href="text/reg.htm?param=test">Use the URL directly</a>
    <h2></h2>
    <div id="preloader"></div>
</div>
<div>
<p>
    <a href="REST/greeting?name=nicole">Try hello world</a>
</p>
</div>

 <div id="uploadFileArea">
   <input id="selectedFile" type="file" name="files" />
   <input id="sumitUploadFile" type="button" value="upload"/>
</div>
<!-- data-bind="ojComponent: {component: 'ojButton', label: 'upload'}, click:uploadFile" -->

<!-- debug mode=nodebug -->
<script src="./common/bootstrap.min.js"></script>
<script src="./common/deployviewer.min.js"></script>

<script type="text/javascript" src="./common/jquery-1.7.1.min.js"> </script>
<script type="text/javascript" src="./components/slideBox/js/jquery.slideBox.js"> </script>
</body>
</html>
<script type="text/javascript">
// 	 recognize();
	 $("#sumitUploadFile").bind("click", uploadFile);
	 
	 
	 function uploadFile() {
         var fileObj = $("#selectedFile")[0].files[0];
         
         var requestURL = "/emsaasui/emlacore/resources/logan-parser/autodetectParsersAllGroup";

         var requestURL =  "http://localhost:8080/Hackthon/REST/upload";
         // FormData
         var form = new FormData();
         form.append("files", fileObj);
         var opts = {
             url: requestURL,
             data: form,
             cache: false,
             contentType: false,
             processData: false,
             type: 'POST',
//             headers: reqHeaders,
             success: self.handleQueryRecommendParserListSuccess,
             error: self.handleQueryRecommendParserListError
         };

         if(form.fake) {
             // Make sure no text encoding stuff is done by xhr
             opts.xhr = function() { var xhr = $.ajaxSettings.xhr(); xhr.send = xhr.sendAsBinary; return xhr; }
             opts.contentType = "multipart/form-data; boundary="+form.boundary;
             opts.data = form.toString();
         }
         $.ajax(opts);
     }
     
     self.handleQueryRecommendParserListSuccess = function(data){
         alert(data.msg)
     }
     
     self.handleQueryRecommendParserListError = function() { 
         alert("file upload failure");
     }
</script>